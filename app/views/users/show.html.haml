- if user_signed_in?
  - if current_user == @user
    %ul
      %li=link_to 'フォロー', following_user_path(@user)
      %li=link_to 'フォロワー', followers_user_path(@user)
  - else
    - if current_user.following?(@user)
      =form_for(current_user.active_relationships.find_by(followed_id: @user.id),
                 html: { method: :delete },
                 remote: true) do |f|
        = f.submit "Unfollow", class: "btn"
    - else
      = form_for current_user.active_relationships.build do |f|
        = hidden_field_tag :followed_id, @user.id
        = f.submit "Follow", class:"btn btn-primary"

%h1 #{@user.name}さんのマイページ
%h2 よく練習している道具
%p #{@user.material}
%h2 所属しているサークル
%p #{@user.club}
%h2 自己紹介
%p #{@user.text}
%h2 合計キャッチ数
%p #{@catches}

- if user_signed_in?
  %h1 最近の達成
  - if @records.present?
    %table.user-records.table
      %tr
        %th Day
        %th Trick
        %th Record
        %th Comment
        %th View
      - @records.each do |record|
        = link_to record_path(record) do
          %tr
            %td #{record.date}
            %td
              #{record.number} #{record.category.material} #{record.trick.name}
            %td #{record.catch} キャッチ
            %td
              - if record.text.present?
                #{record.text}
            %td
              = link_to record_path(record) do
                = fa_icon "external-link-square"
%h1 書いた記事
- if @articles.present?
  %table.table
    %tr
      %th Day
      %th Title
      %th Text
      %th User
      %th View
    - @articles.each do |article|
      %tr
        %td= article.created_at.strftime("%Y-%m-%d")
        %td= article.title
        %td= article.text
        %td= link_to "#{article.user.name} さん", user_path(article.user)
        %td
          = link_to article_path(article) do
            = fa_icon "external-link-square"
