= provide(:title, "ユーザーページ")

%h2 #{@user.name}さんのマイページ
- if user_signed_in?
  - if current_user == @user
    %ul
      %li= link_to '自分がフォローしている人', following_user_path(@user)
      %li= link_to '自分をフォローしている人', followers_user_path(@user)
  - else
    - if current_user.following?(@user)
      =form_for(current_user.active_relationships.find_by(followed_id: @user.id),
                 html: { method: :delete },
                 remote: true) do |f|
        = f.submit "Unfollow", class: "btn"
    - else
      = form_for current_user.active_relationships.build do |f|
        = hidden_field_tag :followed_id, @user.id
        = f.submit "Follow", class:"btn btn-primary"
%h2 合計キャッチ数
%p #{@catches}
- if @records.present?
  %h3 #{@user.name}さんの最近の達成
  = render partial:"shared/detail", locals: { records: @records }
- if @articles.present?
  %h3 #{@user.name}さんが書いた記事
  %table.table
    %tr
      %th Day
      %th Title
      %th Text
      %th User
      %th View
  = render partial:"shared/article-list", locals: { articles: @articles }
